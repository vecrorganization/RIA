{% extends 'ourWeb/base.html' %}
{% load static %}

{% block custom_css %}
  <link rel="stylesheet" href="{% static 'ourWeb/css/products.css' %}" />
  <link rel="stylesheet" href="{% static 'ourWeb/css/prod-detail.css' %}" />
{% endblock %}

{% block extra_msg %}
<div id="ajax-msg" class="alert alert-success base-msg"></div>
<div id="ajax-msg-error" class="alert alert-danger base-msg"></div>
{% endblock %}

{% block content %}
<div class="container prod-detail">
  <div class="row">
    <div class="col-md-5">

      {% if images %} 
      <!--div class="product-image" style="background-image: url({{obj.image_1.url}});"></div-->

      <div id="myCarousel" class="carousel slide " data-ride="carousel">
        <!-- Indicators -->
        <ol class="carousel-indicators">
          {% for img in images %}
            {% if forloop.counter0 < 1 %}
              <li data-target="#myCarousel" data-slide-to="{{forloop.counter0}}" class="active"></li>
            {% else %}
              <li data-target="#myCarousel" data-slide-to="{{forloop.counter0}}"></li>
            {% endif %}
          {% endfor %}
        </ol>

        <!-- Wrapper for slides -->
        <div class="carousel-inner">
          {% for img in images %}
            {% if forloop.counter0 < 1 %}
                <div class="item active">
                  <img src="{{img.url}}" alt="">
                </div>
            {% else %}
              <div class="item">
                <img src="{{img.url}}" alt="">
              </div>
            {% endif %}
          {% endfor %}
        </div>

        <!-- Left and right controls -->
        <a class="left carousel-control" href="#myCarousel" data-slide="prev">
          <span class="glyphicon glyphicon-chevron-left"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="right carousel-control" href="#myCarousel" data-slide="next">
          <span class="glyphicon glyphicon-chevron-right"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>
      {% else %} 
      <div class="product-image" style="background-image: url({% static 'image/no_image.jpg' %});"></div>
      {% endif %}
    </div>
    <div class="col-md-7">
      <h2 class="product-title">{{obj.name}}</h2>
      <p>{{obj.desc}}</p>
      <p><b>Categor√≠a: </b>{{obj.category.desc}}</p>
      <p><b>Clase: </b>{{obj.clase.desc}}</p>
      {% if obj.width %}
        <p><b>Ancho: </b>{{obj.width}}</p>
      {% endif %}
      {% if obj.height %}
        <p><b>Alto: </b>{{obj.height}}</p>
      {% endif %}
      {% if obj.length %}
        <p><b>Largo: </b>{{obj.length}}</p>
      {% endif %}

      <p><b>Vendedor: </b>{{obj.seller}}</p>
      <p><b>Antiguedad: </b>{{obj.createDate|date:"d/m/Y" }}</p>

      <p class="product-price">Bs. {{obj.price}} 
        {% if obj.get_tax > 0 %}
          <span class="product-tax"> - IVA. {{obj.get_tax}}</span>
        {% endif %}
      </p>
      <div class="base-spinner">          
        <form method="post" accept-charset="utf-8" role="form" action="{% url 'ProdOrderAdd' %}" class="form">        
          {% csrf_token %}
          <input type="hidden" name="prod" value="{{ obj.id }}">
          <input type="number" name="qty" min="1" max="999" value="1" step="1">
          {% if user.is_authenticated %} 
            <i class="fa fa-cart-plus" aria-hidden="true" onclick="sendAjax($(this).parent());" role="button"></i>
          {% else %}
            <a href="{% url 'login' %}?next={{request.path}}">
              <i class="fa fa-cart-plus" aria-hidden="true" role="button"></i>
            </a>
          {% endif %}
        </form>
      </div> 
    </div>
  </div>
</div>

{% endblock %}

{% block custom_script %}
  <script type="text/javascript" src="{% static 'js/send_ajax.js' %}"></script>
{% endblock %}